[gd_scene load_steps=2 format=3 uid="uid://c5xytcdrlyfyg"]

[sub_resource type="GDScript" id="GDScript_8ew5s"]
script/source = "#Bootstrap Script
extends Node

const WORLD_PATH := \"res://feature/!world/world_screen.tscn\"


var container := Node.new()


func _init() -> void:
	pass


func _ready() -> void:
	GodotLogger.info(\"Loaded Engine!\")
	
	#add node for custom nodes
	var root = get_tree().root
	root.add_child.call_deferred(container)
	container.name = \"Bootstrap Container\"
	container.add_child.call_deferred(FpsDisplay.new())
	
	#loading main game scene
	await ResourceLoader.load_threaded_request(WORLD_PATH)
	var game_screen: WorldScreen = ResourceLoader.load_threaded_get(WORLD_PATH).instantiate()
	root.remove_child.call_deferred(self)
	root.add_child.call_deferred(game_screen)
	
	#load database
	var database_path := ProjectSettings.get_setting(\"resource_databases/main_base_path\", \"res://database.gddb\") as String
	await ResourceLoader.load_threaded_request(database_path)
	var database: Database = ResourceLoader.load_threaded_get(database_path)
	game_screen.database = database
	
	#await game_screen.ready
	GodotLogger.info(\"Loaded bootstrap!\")
	
"

[node name="Bootstrap" type="Node"]
script = SubResource("GDScript_8ew5s")

[node name="LoadingScreen" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
